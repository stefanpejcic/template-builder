<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<title></title>

	<!-- GrapeJs -->
	<link rel="stylesheet" href="assets/css/grapes.min.css">
	<script src="assets/js/grapes.min.js"></script>
	
	<!-- UIKit -->
	<link rel="stylesheet" href="assets/uikit-3.3.3/css/uikit.min.css" />
    <script src="assets/uikit-3.3.3/js/uikit.min.js"></script>
    <script src="assets/uikit-3.3.3/js/uikit-icons.min.js"></script>

    <!-- Style -->
	<link rel="stylesheet" href="assets/css/style.css">

	<!-- Plugins -->
	<script src="editor/plugins/custom-code-editor.js"></script>

</head>
<body>
	<div id="gjs"></div>
	<!--  -->
	<script type="text/javascript">
		const categories = {
	 		'layout': 'Layout <span class="gjs-title-tags">Elements</span>',
	 		'basic': 'Basic <span class="gjs-title-tags">Elements</span>',
	 		'typography': 'Typography <span class="gjs-title-tags">Elements</span>',
	 		'media': 'Media <span class="gjs-title-tags">Elements</span>',
	 		'components': 'Components <span class="gjs-title-tags">Layout structure</span>',
	 		'pages': 'Pages <span class="gjs-title-tags">Fully constructed layouts</span>',
	 		'uikit': 'UIKit Component <a target="_blank" href="https://getuikit.com/docs/accordion">UIKit Doc</a>',
	 		'mylinkpreview': '<a target="_blank" href="https://mylinkpreview.com/">MylinkPreview</a> Blocks'
	 	}

	 	const editor = grapesjs.init({
	 		container : '#gjs',
	 		height: '100vh',
			canvas: {
				styles: [
					'http://192.168.2.31/template-builder/grapejs/assets/uikit-3.3.3/css/uikit.min.css',
				],
			 	scripts: [
			 		'http://192.168.2.31/template-builder/grapejs/assets/uikit-3.3.3/js/uikit.min.js',
			 		'http://192.168.2.31/template-builder/grapejs/assets/uikit-3.3.3/js/uikit-icons.min.js'
			 	]
			},
			plugins: [
				'customCodeEditor',
				editor => {
	 				let panelManager = editor.Panels;
	 				let domComponents = editor.DomComponents;

					// Hide default devices
					editor.getConfig().showDevices = 0;

					// Device icons manager
	 				panelManager.addPanel({ id: "devices-c" }).get("buttons").add([
						{
							id: "set-device-desktop",
							command: function(e) { return e.setDevice("Desktop") },
							className: "gjs-dekstop-device",
							active: true,
							label: `<span uk-icon="icon: desktop; ratio: 1" uk-tooltip="title: Desktop Layout; pos: top"></span>`
						},
						{
							id: "set-device-tablet",
							command: function(e) { return e.setDevice("Tablet") },
							className: "gjs-tablet-device",
							label: `<span uk-icon="icon: tablet; ratio: 1" uk-tooltip="title: Tablet Layout; pos: top"></span>`
						},
						{
							id: "set-device-mobile",
							command: function(e) { return e.setDevice("Mobile portrait") },
							className: "gjs-mobile-portrait-device",
							label: `<span uk-icon="icon: phone; ratio: 1" uk-tooltip="title: Phone Layout; pos: top"></span>`
						},
					]);
					panelManager.getButton('views', 'open-sm').set({
						id: "open-sm",
						className: 'gjs-pn-btn',
						command: "open-sm",
						active: true,
						attributes: {
							title: "Open Style Manager"
						},
						label: `<span uk-icon="paint-bucket" uk-tooltip="title: Customization; pos: right"></span>`
					});
					panelManager.getButton('views', 'open-tm').set({
						id: "open-tm",
						className: 'gjs-pn-btn',
						command: "open-tm",
						active: false,
						attributes: {
							title: "Open Settings"
						},
						label: `<span uk-icon="settings" uk-tooltip="title: Settings; pos: right"></span>`
					});
					panelManager.getButton('views', 'open-layers').set({
						id: "open-layers",
						className: 'gjs-pn-btn',
						command: "open-layers",
						active: false,
						attributes: {
							title: "Open Layers"
						},
						label: `<span uk-icon="menu" uk-tooltip="title: Layers; pos: right"></span>`
					});
					panelManager.getButton('views', 'open-blocks').set({
						id: "open-blocks",
						className: 'gjs-pn-btn',
						command: "open-blocks",
						active: false,
						attributes: {
							title: "Open Blocks"
						},
						label: `<span uk-icon="grid" uk-tooltip="title: Blocks; pos: right"></span>`
					});
					panelManager.getButton('options', 'sw-visibility').set({
						id: "sw-visibility",
						className: 'gjs-pn-btn',
						command: "sw-visibility",
						active: true,
						label: `<span uk-icon="thumbnails" uk-tooltip="title: Guide Lines; pos: bottom"></span>`
					});
					panelManager.getButton('options', 'preview').set({
						id: "preview",
						className: 'gjs-pn-btn',
						command: "preview",
						active: false,
						label: `<span uk-icon="push" uk-tooltip="title: Preview; pos: bottom"></span>`
					});
					panelManager.getButton('options', 'fullscreen').set({
						id: "fullscreen",
						className: 'gjs-pn-btn',
						command: "fullscreen",
						active: false,
						label: `<span uk-icon="expand" uk-tooltip="title: Set Fullscreen; pos: bottom"></span>`
					});
					panelManager.getButton('options', 'export-template').set({
						id: "export-template",
						className: 'gjs-pn-btn',
						command: "export-template",
						active: false,
						label: `<span uk-icon="code" uk-tooltip="title: Show Code; pos: bottom"></span>`
					});
				},
			],
			// Disable the storage manager for the moment
  			// storageManager: false,
	 	});

	 	const blockManager = editor.BlockManager;
	 	const commands = editor.Commands;
	</script>

	<!-- Blocks -->
	<script src="editor/blocks/pages.js"></script>
	<script src="editor/blocks/elements.js"></script>
</body>
</html>